# Расчётно-пояснительная записка видеохостинга формата YouTube
## Описание и аналоги
### Описание
Проектируемый сервис — высоконагруженная платформа для хранения, обработки и потоковой передачи видеоконтента пользователям по всему миру.

Ключевые особенности системы (MVP):

* загрузка видео пользователями
* автоматическая обработка видео
* создание каналов
* подписки на каналы
* лайки, комментарии, просмотры
* сбор статистики

Когда пользователь загружает видео, оно отправляется на сервер по частям — чанками:
* видео разбивается на фрагменты фиксированного размера (например, 5–10 МБ)
* каждый фрагмент загружается отдельно
* сервер подтверждает получение каждого чанка
* после загрузки всех чанков видео собирается

Сервис должен обеспечивать:

* минимальную задержку при старте воспроизведения
* устойчивость к пиковым нагрузкам

### Аналоги

Крупнейшие решения на рынке видеохостинга:

* [TikTok](https://www.tiktok.com/) — короткие вертикальные видео с сильной рекомендательной системой
* [Vimeo](https://vimeo.com/) — платформа для профессионального контента
* [Rutube](https://rutube.ru/) — российский видеохостинг

## Аудитория
### Описание аудитории

Основная аудитория — пользователи от 12 до 60 лет.

Ключевые группы:

* зрители развлекательного контента
* обучающиеся (курсы, туториалы, лекции)
* авторы видео (блогеры, студии, компании)

### Местоположение аудитории

Платформа ориентирована на:

* глобальный рынок
* распределённую географию пользователей
* наличие дата-центров в разных регионах мира

### Размер аудитории
Для расчётной модели принимаем:

* MAU (месячная аудитория): 2.7 млрд пользователей [[1](https://www.aboutchromebooks.com/youtube-statistics-and-user-trends)]
* DAU (дневная активная аудитория): 122 млн пользователей [[1](https://www.aboutchromebooks.com/youtube-statistics-and-user-trends)]
* На платформу загружается около 900 часов видео каждую минуту [[5](https://thumbnailtest.com/stats/youtube/)]
* В среднем пользователь смотрит 9 видео за сессию [[5](https://thumbnailtest.com/stats/youtube/)]
* 5.76 млн видео загружаются ежедневно [[5](https://thumbnailtest.com/stats/youtube/)]
* Средняя длина видео на YouTube примерно 11,7 минут [[2](https://www.globalmediainsight.com/blog/youtube-users-statistics)]
* Пользователи в среднем смотрят видео около 19–30 минут в день [[3](https://affmaven.com/ru/youtube-statistics)]

## Распределение нагрузки
### Геораспределение
Минимально:

* Северная Америка
* Европа
* Азия
* Южная Америка

# Расчет нагрузки

## Расчет нагрузки на просмотр видео

### Суммарное время просмтра в сутки (пик)

DAU = 122 млн, среднее время просмотра = 30 минут [[1](https://www.aboutchromebooks.com/youtube-statistics-and-user-trends)]

```
122 000 000 × 30 минут = 3 660 000 000 минут в день (61 млн часов в сутки)
```

### Среднее количество одновременных зрителей

```
61 000 000 / 24 ≈ 2 540 000 часов просмотра в час
```

С учётом пиков (вечерние часы ×2) до 5 млн одновременных зрителей

### Сетевой трафик

Судя по источнику [4] имеем битрейт и разрешение:

| Разрешение  | Средний битрейт (Мбит/с)| Примерный объем за час (ГБ/ч) |
|-------------|-------------------------|-------------------------------|
| 720p        | 1.5-6.0                 | 1.2-2.7                       | 
| 1080p       | 3.0-9.0                 | 2.5-4.1                       |
| 1440p       | 6.0-18.0                | 4.0-5.1                       |
| 4K          | 13.0-51.0               | 5.5-23.0                      |

При этом 85% просмтров в HD+ качестве [6]. Значит большая часть трафик лежит в диапазоне битрейта 3-9 Мбит.

Предположим, что в таком случае средний битрейт - 7 Мбит/с:

```
5 000 000 × 7 Мбит/с = 35 000 000 Мбит/с = 35 Тбит/с
```

При этом объем видео за час будет около 3 Гб.

## Нагрузка на загрузку видео

### Объем загрузкиc

```
900 × 60 = 54 0000 часов в час
54 000 × 24 = 1296000 часов в сутки
```

### Хранение видео

```
900 × 60 × 3 = 162 000 ГБ/мин 
= 162 ТБ/мин
```
За сутки:

```
162 ТБ/мин × 1440 = 233 280 ТБ ≈ 233 ПБ/сутки
```

## Нагрузка на API (RPS)

Сначала ответим на вопрос, сколько видео смотрит один пользователь в день:

```
5 000 000 000 / 122 000 000 = 41 видео в день
```

Если среднее время просмтра 30 минут, то

```
30 минут / 41 = 44 секунды (среднее удержание на видео)
```

Рассчитаем минимальную API-нагрузку на старт видео

```
5 000 000 000 / 86 400 = 58 000 новых просмотров в секунду
```

Каждое видео требует:

* 1 запрос получения метаданных
* 1 запрос на старт стрима
* 1 событие логирования

Также учтем телеметрию. Большинство видеоплатформ отправляют heartbeat каждые 5-15 секунд. Положим, что на Youtube этот показатель равен 10 секундам:

```
44 / 10 = 4 события
```

Тогда RPS будет равен:

```
58 000 x (3 + 4) = 406 000 RPS
```

Тогда пиковый RPS будет в два раза больше:

```
406 000 x 2 = 814 000 RPS (PEAK)
```

## Нагрузка на транскодирование

Если каждое видео (3.6 млн в сутки) кодируется в 5 форматов, то:

3 600 000 × 5 = 18 000 000 задач транскодирования в сутки (208 задач в секунду)

## Сводная таблица

| Продуктовая метрика          | Значение            |
|------------------------------|---------------------|
| DAU                          | 122 млн             |
| Одновременные пользователи   | 5 млн (пик)         |
| Трафик                       | ~35 Тбит/с          |
| Новых видео в сутки          | ~3.6 млн            |
| Новых данных в сутки         | ~233 ПБ             |
| API нагрузка                 | ~406 тыс RPS        |
| Задач транскодирования       | ~18 млн/сутки       |


## Список источников
1. [Youtube Statistics And User Trends In 2025](https://www.aboutchromebooks.com/youtube-statistics-and-user-trends)
2. [YOUTUBE STATISTICS 2026 (DEMOGRAPHICS, USERS BY COUNTRY & MORE)](https://www.globalmediainsight.com/blog/youtube-users-statistics)
3. [Статистика YouTube за 2026 год: ключевые выводы и тенденции](https://affmaven.com/ru/youtube-statistics)
4. [How much data does YouTube actually use?](https://www.androidauthority.com/how-much-data-does-youtube-use-964560/)
5. [YouTube Statistics: Revenue & Growth (2026)](https://thumbnailtest.com/stats/youtube/)
6. [Youtube Video Statistics](https://zipdo.co/youtube-video-statistics/)


