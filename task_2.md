# Расчет нагрузки

## Расчет нагрузки на просмотр видео

### Суммарное время просмтра в сутки (пик)

DAU = 122 млн, среднее время просмотра = 30 минут
122 000 000 × 30 минут = 3 660 000 000 минут в день (61 млн часов в сутки)

### Среднее количество одновременных зрителей

61 000 000 / 24 ≈ 2 540 000 часов просмотра в час. С учётом пиков (вечерние часы ×2) до 5 млн одновременных зрителей

### Сетевой трафик

Предположим средний битрейт: 720p ≈ 5 Мбит/с (усредним, часть смотрит 360p, часть 1080p):

5 000 000 пользователей × 5 Мбит/с = 25 Тбит/с

## Нагрузка на загрузку видео

### Объем загрузки

500 часов видео в минуту:

500 × 60 = 30 000 часов в час
30 000 × 24 = 720 000 часов в сутки

### Средний размер видео

Средняя длина = 11,7 минут, средний размер 1080p ≈ 1 ГБ за 10–15 минут. Тогда скажем, что 1 видео = 1 ГБ:

720 000 часов / 0.2 часа (12 минут)
≈ 3 600 000 видео в сутки

3 600 000 × 1 ГБ ≈ 3.6 ПБ в день

С учётом хранения нескольких качеств выходит около 10 ПБ в сутки

## Нагрузка на API (RPS)

Пусть :

* 5 млн одновременных пользователей
* каждый делает ~1 запрос в 5 секунд (лайки, подгрузка, рекомендации, статистика)

5 000 000 / 5 = 1 000 000 RPS (только на frontend)

## Нагрузка на транскодирование

Если каждое видео (3.6 млн в сутки) кодируется в 5 форматов, то:

3 600 000 × 5 = 18 000 000 задач транскодирования в сутки (208 задач в секунду)

## Сводная таблица

| Параметр                     | Значение            |
|------------------------------|---------------------|
| DAU                          | 122 млн             |
| Одновременные пользователи   | 5 млн (пик)         |
| Пиковый трафик               | ~25 Тбит/с          |
| Новых видео в сутки          | ~3.6 млн            |
| Новых данных в сутки         | ~10 ПБ              |
| API нагрузка                 | ~1 млн RPS          |
| Задач транскодирования       | ~18 млн/сутки       |

